"use strict";(self.webpackChunkrent360=self.webpackChunkrent360||[]).push([[171],{2171:($,c,s)=>{s.r(c),s.d(c,{DashboardModule:()=>M});var u=s(4466),g=s(3128),t=s(8256),l=s(8700),Z=s(7338),p=s(263),_=s(1994),r=s(6895),m=s(9219),h=s(6709);let x=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["r360-pagination"]],decls:7,vars:0,consts:[[1,"flex","items-center","gap-2"],[1,"r360-btn-secondary"],[1,"text-sm","text-gray-600","dark:text-gray-300"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t._uU(2,"Prev"),t.qZA(),t.TgZ(3,"span",2),t._uU(4,"Page 1"),t.qZA(),t.TgZ(5,"button",1),t._uU(6,"Next"),t.qZA()())},encapsulation:2}),n})();var f=s(2802),b=s(5213);function q(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){const d=t.CHM(e).$implicit,R=t.oxw(3);return t.KtG(R.selectPersona(d))}),t._uU(1),t.qZA()}if(2&n){const e=o.$implicit,i=t.oxw(3);t.Q6J("ngClass",i.selectedPersona===e?"bg-indigo-50 text-primary dark:bg-indigo-500/20 dark:text-indigo-200":""),t.xp6(1),t.hij(" ",i.personaLabel(e)," ")}}function T(n,o){if(1&n&&(t.TgZ(0,"section",4)(1,"div",18),t.YNc(2,q,2,2,"button",19),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.availablePersonas)}}function A(n,o){if(1&n&&(t.TgZ(0,"r360-card",21)(1,"div",22),t._uU(2),t.qZA(),t.TgZ(3,"div",23),t._uU(4),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.label),t.xp6(2),t.Oqu(e.value)}}function U(n,o){if(1&n&&(t.TgZ(0,"div",33)(1,"span",34),t._uU(2),t.qZA(),t.TgZ(3,"span",35),t._uU(4),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.label),t.xp6(2),t.Oqu(e.value)}}function v(n,o){if(1&n&&(t.TgZ(0,"div",33)(1,"span",34),t._uU(2),t.qZA(),t.TgZ(3,"span",35),t._uU(4),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.label),t.xp6(2),t.Oqu(e.value)}}function y(n,o){if(1&n&&(t.TgZ(0,"div",33)(1,"span",34),t._uU(2),t.qZA(),t.TgZ(3,"span",35),t._uU(4),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.label),t.xp6(2),t.Oqu(e.value)}}function O(n,o){if(1&n&&(t.TgZ(0,"tr",36)(1,"td",37),t._uU(2),t.qZA(),t.TgZ(3,"td",37),t._uU(4),t.qZA(),t.TgZ(5,"td",37),t._uU(6),t.qZA(),t.TgZ(7,"td",37),t._uU(8),t.qZA(),t.TgZ(9,"td",37),t._UZ(10,"r360-status-badge",38),t.qZA(),t.TgZ(11,"td",37)(12,"button",39),t._uU(13,"Send msg"),t.qZA()()()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.role),t.xp6(2),t.Oqu(e.property),t.xp6(2),t.Oqu(e.unit),t.xp6(2),t.Q6J("value",e.status)}}function w(n,o){if(1&n&&(t.TgZ(0,"tr",36)(1,"td",37),t._uU(2),t.qZA(),t.TgZ(3,"td",37),t._uU(4),t.qZA(),t.TgZ(5,"td",37),t._uU(6),t.qZA(),t.TgZ(7,"td",40),t._uU(8),t.qZA(),t.TgZ(9,"td",41),t._uU(10),t.qZA(),t.TgZ(11,"td",37),t._uU(12),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.property),t.xp6(2),t.Oqu(e.unit),t.xp6(2),t.Oqu(e.rentDue),t.xp6(2),t.Oqu(e.maintenanceDue),t.xp6(2),t.Oqu(e.daysLate)}}function C(n,o){if(1&n&&(t.TgZ(0,"tr",36)(1,"td",37),t._uU(2),t.qZA(),t.TgZ(3,"td",37),t._uU(4),t.qZA(),t.TgZ(5,"td",37),t._uU(6),t.qZA(),t.TgZ(7,"td",37),t._uU(8),t.qZA(),t.TgZ(9,"td",37),t._uU(10),t.qZA(),t.TgZ(11,"td",37),t._uU(12),t.qZA(),t.TgZ(13,"td",37),t._uU(14),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.role),t.xp6(2),t.Oqu(e.property),t.xp6(2),t.Oqu(e.unit),t.xp6(2),t.Oqu(e.from),t.xp6(2),t.Oqu(e.to),t.xp6(2),t.Oqu(e.moveOutReason)}}function D(n,o){if(1&n&&(t.TgZ(0,"section",4)(1,"h3",24),t._uU(2,"Society Admin Combined View"),t.qZA(),t.TgZ(3,"div",25)(4,"r360-card")(5,"div",26),t._uU(6,"Owner Insights"),t.qZA(),t.TgZ(7,"div",27),t.YNc(8,U,5,2,"div",28),t.qZA()(),t.TgZ(9,"r360-card")(10,"div",26),t._uU(11,"Tenant Insights"),t.qZA(),t.TgZ(12,"div",27),t.YNc(13,v,5,2,"div",28),t.qZA()(),t.TgZ(14,"r360-card")(15,"div",26),t._uU(16,"Maintenance & Meetings"),t.qZA(),t.TgZ(17,"div",27),t.YNc(18,y,5,2,"div",28),t.qZA()()(),t.TgZ(19,"div",29)(20,"r360-card")(21,"div",30)(22,"h4",31),t._uU(23,"Owner / Tenant / Member Directory"),t.qZA(),t.TgZ(24,"span",32),t._uU(25,"Status + quick action"),t.qZA()(),t.TgZ(26,"r360-table")(27,"thead")(28,"tr",15)(29,"th",16),t._uU(30,"Name"),t.qZA(),t.TgZ(31,"th",16),t._uU(32,"Role"),t.qZA(),t.TgZ(33,"th",16),t._uU(34,"Property"),t.qZA(),t.TgZ(35,"th",16),t._uU(36,"Unit"),t.qZA(),t.TgZ(37,"th",16),t._uU(38,"Status"),t.qZA(),t.TgZ(39,"th",16),t._uU(40,"Action"),t.qZA()()(),t.TgZ(41,"tbody"),t.YNc(42,O,14,5,"tr",17),t.qZA()()(),t.TgZ(43,"r360-card")(44,"div",30)(45,"h4",31),t._uU(46,"Rent + Maintenance Defaulters"),t.qZA(),t.TgZ(47,"span",32),t._uU(48,"Not paid amount and late days"),t.qZA()(),t.TgZ(49,"r360-table")(50,"thead")(51,"tr",15)(52,"th",16),t._uU(53,"Name"),t.qZA(),t.TgZ(54,"th",16),t._uU(55,"Property"),t.qZA(),t.TgZ(56,"th",16),t._uU(57,"Unit"),t.qZA(),t.TgZ(58,"th",16),t._uU(59,"Rent Due"),t.qZA(),t.TgZ(60,"th",16),t._uU(61,"Maintenance Due"),t.qZA(),t.TgZ(62,"th",16),t._uU(63,"Days Late"),t.qZA()()(),t.TgZ(64,"tbody"),t.YNc(65,w,13,6,"tr",17),t.qZA()()(),t.TgZ(66,"r360-card")(67,"div",30)(68,"h4",31),t._uU(69,"Historical Owner / Tenant Records"),t.qZA(),t.TgZ(70,"span",32),t._uU(71,"Retained in system, not removed"),t.qZA()(),t.TgZ(72,"r360-table")(73,"thead")(74,"tr",15)(75,"th",16),t._uU(76,"Name"),t.qZA(),t.TgZ(77,"th",16),t._uU(78,"Role"),t.qZA(),t.TgZ(79,"th",16),t._uU(80,"Property"),t.qZA(),t.TgZ(81,"th",16),t._uU(82,"Unit"),t.qZA(),t.TgZ(83,"th",16),t._uU(84,"From"),t.qZA(),t.TgZ(85,"th",16),t._uU(86,"To"),t.qZA(),t.TgZ(87,"th",16),t._uU(88,"Reason"),t.qZA()()(),t.TgZ(89,"tbody"),t.YNc(90,C,15,7,"tr",17),t.qZA()()()()()),2&n){const e=t.oxw().ngIf;t.xp6(8),t.Q6J("ngForOf",e.adminView.ownerInsights),t.xp6(5),t.Q6J("ngForOf",e.adminView.tenantInsights),t.xp6(5),t.Q6J("ngForOf",e.adminView.operationsInsights),t.xp6(24),t.Q6J("ngForOf",e.adminView.directory),t.xp6(23),t.Q6J("ngForOf",e.adminView.defaulters),t.xp6(25),t.Q6J("ngForOf",e.adminView.history)}}function P(n,o){if(1&n&&(t.TgZ(0,"r360-card",44)(1,"div",45),t._uU(2),t.qZA(),t.TgZ(3,"div",46),t._uU(4),t.qZA(),t.TgZ(5,"p",47),t._uU(6),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.title),t.xp6(2),t.Oqu(e.value),t.xp6(2),t.Oqu(e.description)}}function F(n,o){if(1&n&&(t.TgZ(0,"section",4)(1,"h3",24),t._uU(2,"Cross-Module Intelligence"),t.qZA(),t.TgZ(3,"div",42),t.YNc(4,P,7,3,"r360-card",43),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(4),t.Q6J("ngForOf",e.insights)}}const N=function(n,o,e,i,a){return[n,o,e,i,a]};function J(n,o){if(1&n&&(t.TgZ(0,"div",48)(1,"div",49)(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA()(),t.TgZ(6,"div",50),t._UZ(7,"div",51),t.qZA()()),2&n){const e=o.$implicit,i=t.oxw(2);t.xp6(3),t.Oqu(e.label),t.xp6(2),t.hij("",e.percent,"%"),t.xp6(2),t.Q6J("ngClass",t.qbA(3,N,i.widthClass(e.percent),"success"===e.tone?"bg-success":"","info"===e.tone?"bg-secondary":"","warning"===e.tone?"bg-warning":"","danger"===e.tone?"bg-danger":""))}}function Q(n,o){if(1&n&&(t.TgZ(0,"tr",36)(1,"td",37),t._uU(2),t.qZA(),t.TgZ(3,"td",37),t._uU(4),t.qZA(),t.TgZ(5,"td",37),t._uU(6),t.qZA(),t.TgZ(7,"td",37),t._uU(8),t.qZA(),t.TgZ(9,"td",37),t._UZ(10,"r360-status-badge",38),t.qZA(),t.TgZ(11,"td",37)(12,"a",52),t._uU(13),t.qZA()()()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.amount),t.xp6(2),t.Oqu(e.property),t.xp6(2),t.Oqu(e.unit),t.xp6(2),t.Oqu(e.description),t.xp6(2),t.Q6J("value",e.status),t.xp6(3),t.Oqu(e.action)}}function Y(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",1),t._UZ(2,"r360-page-header",2),t.YNc(3,T,3,1,"section",3),t.TgZ(4,"section",4)(5,"h2",5),t._uU(6),t.qZA(),t.TgZ(7,"div",6),t.YNc(8,A,5,2,"r360-card",7),t.qZA()(),t.YNc(9,D,91,6,"section",3),t.YNc(10,F,5,1,"section",3),t.TgZ(11,"section",8)(12,"r360-card",9)(13,"h3",10),t._uU(14,"Payments Overview"),t.qZA(),t.YNc(15,J,8,9,"div",11),t.qZA(),t.TgZ(16,"r360-card",12)(17,"div",13)(18,"h3",14),t._uU(19),t.qZA(),t._UZ(20,"r360-pagination"),t.qZA(),t.TgZ(21,"r360-table")(22,"thead")(23,"tr",15)(24,"th",16),t._uU(25,"Amount"),t.qZA(),t.TgZ(26,"th",16),t._uU(27,"Property"),t.qZA(),t.TgZ(28,"th",16),t._uU(29,"Unit"),t.qZA(),t.TgZ(30,"th",16),t._uU(31,"Description"),t.qZA(),t.TgZ(32,"th",16),t._uU(33,"Status"),t.qZA(),t.TgZ(34,"th",16),t._uU(35,"Actions"),t.qZA()()(),t.TgZ(36,"tbody"),t.YNc(37,Q,14,6,"tr",17),t.qZA()()()()(),t.BQk()),2&n){const e=o.ngIf,i=t.oxw();t.xp6(2),t.Q6J("title","Good Morning, "+i.userName),t.xp6(1),t.Q6J("ngIf",i.availablePersonas.length>1),t.xp6(3),t.Oqu(i.viewLabel),t.xp6(2),t.Q6J("ngForOf",e.kpis),t.xp6(1),t.Q6J("ngIf","societyAdmin"===i.selectedPersona&&e.adminView),t.xp6(1),t.Q6J("ngIf",i.insights.length),t.xp6(5),t.Q6J("ngForOf",e.collectionHealth),t.xp6(4),t.Oqu(i.chargesTitle),t.xp6(18),t.Q6J("ngForOf",e.charges)}}const I=[{path:"",component:(()=>{class n{constructor(e,i,a,d){this.dashboardData=e,this.settings=i,this.auth=a,this.platformInsights=d,this.data=null,this.insights=[],this.userName="User",this.availablePersonas=[],this.selectedPersona="owner"}ngOnInit(){this.settings.userSettings$.subscribe(e=>{this.userName=e.fullName}),this.initializePersonas(),this.loadPersona(this.selectedPersona)}get viewLabel(){return"tenant"===this.selectedPersona?"Tenant View":"societyAdmin"===this.selectedPersona?"Society Admin View":"Owner View"}get chargesTitle(){return"tenant"===this.selectedPersona?"Your Charges":"societyAdmin"===this.selectedPersona?"Society Billing":"Owner Charges"}personaLabel(e){return"tenant"===e?"Tenant":"societyAdmin"===e?"Society Admin":"Owner"}selectPersona(e){this.selectedPersona!==e&&(this.selectedPersona=e,this.loadPersona(e))}widthClass(e){return e>=90?"w-[90%]":e>=80?"w-[80%]":e>=70?"w-[70%]":e>=60?"w-[60%]":e>=50?"w-[50%]":e>=40?"w-[40%]":e>=30?"w-[30%]":e>=20?"w-[20%]":e>=10?"w-[10%]":"w-[5%]"}initializePersonas(){const e=this.auth.snapshotUser?.roles??[],i=[];e.includes("owner")&&i.push("owner"),e.includes("tenant")&&i.push("tenant"),e.includes("societyAdmin")&&i.push("societyAdmin"),this.availablePersonas=i.length?i:["owner"],this.selectedPersona="tenant"===this.settings.snapshot.defaultDashboard&&this.availablePersonas.includes("tenant")?"tenant":this.availablePersonas[0]}loadPersona(e){const i=e;this.dashboardData.getOverviewByRole(i).subscribe(a=>{this.data=a}),this.platformInsights.getInsights(i).subscribe(a=>{this.insights=a})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.n),t.Y36(Z.s),t.Y36(p.e),t.Y36(_.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dashboard"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"r360-page"],["subtitle","Role-based overview",3,"title"],["class","r360-section",4,"ngIf"],[1,"r360-section"],[1,"mb-4","text-2xl","font-semibold"],[1,"grid","grid-cols-1","gap-4","lg:grid-cols-2","xl:grid-cols-4"],["class","block transition-shadow hover:shadow-md",4,"ngFor","ngForOf"],[1,"grid","grid-cols-1","gap-4","xl:grid-cols-5"],[1,"block","xl:col-span-2"],[1,"mb-6","text-xl","font-semibold"],["class","mb-5 last:mb-0",4,"ngFor","ngForOf"],[1,"block","xl:col-span-3"],[1,"mb-6","flex","items-center","justify-between"],[1,"text-xl","font-semibold"],[1,"border-b","border-gray-200","dark:border-gray-700"],[1,"r360-th"],["class","r360-row",4,"ngFor","ngForOf"],[1,"flex","flex-wrap","items-center","gap-2"],["type","button","class","r360-btn-secondary",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button",1,"r360-btn-secondary",3,"ngClass","click"],[1,"block","transition-shadow","hover:shadow-md"],[1,"mb-2","text-xs","uppercase","tracking-wide","text-gray-500"],[1,"text-4xl","font-bold","text-gray-900","dark:text-gray-100"],[1,"mb-4","text-xl","font-semibold"],[1,"grid","grid-cols-1","gap-4","xl:grid-cols-3"],[1,"mb-3","text-sm","font-semibold"],[1,"space-y-2"],["class","flex items-center justify-between text-sm",4,"ngFor","ngForOf"],[1,"mt-4","grid","grid-cols-1","gap-4"],[1,"mb-4","flex","items-center","justify-between"],[1,"text-lg","font-semibold"],[1,"text-xs","text-gray-500"],[1,"flex","items-center","justify-between","text-sm"],[1,"text-gray-500","dark:text-gray-300"],[1,"font-semibold"],[1,"r360-row"],[1,"r360-td"],[3,"value"],[1,"r360-btn-secondary"],[1,"r360-td","font-semibold","text-danger"],[1,"r360-td","font-semibold","text-warning"],[1,"grid","grid-cols-1","gap-4","lg:grid-cols-3"],["class","block",4,"ngFor","ngForOf"],[1,"block"],[1,"text-xs","uppercase","tracking-wide","text-gray-500"],[1,"mt-2","text-2xl","font-bold","text-gray-900","dark:text-gray-100"],[1,"mt-2","text-sm","text-gray-500","dark:text-gray-300"],[1,"mb-5","last:mb-0"],[1,"mb-2","flex","items-center","justify-between","text-sm"],[1,"h-2","overflow-hidden","rounded-lg","bg-gray-200","dark:bg-gray-700"],[1,"h-full","rounded-lg",3,"ngClass"],["href","#",1,"font-semibold","text-secondary"]],template:function(e,i){1&e&&t.YNc(0,Y,38,9,"ng-container",0),2&e&&t.Q6J("ngIf",i.data)},dependencies:[r.mk,r.sg,r.O5,m.A,h.a,x,f.q,b.e]}),n})()}];let k=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.Bz.forChild(I),g.Bz]}),n})(),M=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.m,k]}),n})()}}]);